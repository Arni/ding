<?php

/**
 * @file
 * Interface module for talking with the materials backend.
 */

/**
 *
 */
function ding_entity_load($id) {
  if ($type = ding_entity_type()){
    return reset(entity_load($type, FALSE, array('ding_entity_id' => array($id))));
  }
  return FALSE;
}

function ding_entity_type() {
  $type = &drupal_static(__FUNCTION__);
  if (is_null($type)) {
    $types = module_invoke_all('ding_entity_types');
    if (isset($types['ding_entity'])) {
      $type = $types['ding_entity'];
      return $type;
    }
    // None found, flag it.
    $type = FALSE;
  }
  return $type;
}

function ding_entity_collection_load($id) {
  if ($type = ding_entity_collection_type()){
    return reset(entity_load($type, FALSE, array('ding_entity_collection_id' => array($id))));
  }
  return FALSE;
}

function ding_entity_collection_type() {
  $type = &drupal_static(__FUNCTION__);
  if (is_null($type)) {
    $types = module_invoke_all('ding_entity_types');
    if (isset($types['ding_entity_collection'])) {
      $type = $types['ding_entity_collection'];
      return $type;
    }
    // None found, flag it.
    $type = FALSE;
  }
  return $type;
}
