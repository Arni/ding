<?php
/**
 * @file
 * BPI main module file.
 *
 * @todo General description needed here.
 */

/**
 * Implements hook_menu().
 */
function bpi_menu() {
  $menu = array();

  $menu['admin/bpi'] = array(
    'title' => 'BPI syndication',
    'description' => 'Sindicate content from the well.',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('bpi_syndicate_page_form'),
    'access arguments' => array('syndicate content'),
    'file' => 'bpi.syndicate.inc',
  );

  $menu['admin/bpi/page/%'] = array(
    'title' => 'BPI syndication',
    'description' => 'Retrieve content from the well.',
    'page callback' => 'bpi_search_content',
    'page arguments' => array(3),
    'access arguments' => array('syndicate content'),
    'file' => 'bpi.syndicate.inc',
  );

  $menu['admin/config/bpi'] = array(
    'title' => 'BPI',
    'description' => 'BPI Related Settings',
    'access arguments' => array('administer bpi'),
    'page callback' => 'bpi_admin_menu_block_page',
    'page arguments' => array(),
    'file' => 'bpi.admin.inc',
  );

  $menu['admin/config/bpi/settings'] = array(
    'title' => 'Service settings',
    'description' => 'BPI integration settings',
    'access arguments' => array('administer bpi'),
    'page callback' => 'drupal_get_form',
    'page arguments' => array('bpi_admin_settings_form'),
    'file' => 'bpi.admin.inc',
  );

  $menu['admin/config/bpi/content_mapping'] = array(
    'title' => 'Content mapping',
    'description' => 'Map BPI fields to your content fields.',
    'access arguments' => array('administer bpi'),
    'page callback' => 'drupal_get_form',
    'page arguments' => array('bpi_admin_content_mapping_form'),
    'file' => 'bpi.admin.inc',
  );

  return $menu;
}

/**
 * Implements hook_permission().
 */
function bpi_permission() {
  $perm = array();

  $perm['administer bpi'] = array(
    'title' => t('Administer BPI settings'),
  );

  $perm['syndicate content'] = array(
    'title' => t('Syndicate content'),
  );

  return $perm;
}

/**
 * Implements hook_theme().
 */
function bpi_theme($existing, $type, $theme, $path) {
  $hooks = array();

  $hooks['bpi_well_item'] = array(
    'variables' => array(),
    'path' => $path . '/templates/',
    'template' => 'bpi-well-item',
  );

  return $hooks;
}
