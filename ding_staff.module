<?php
/**
 * @file
 * Code for the Ding staff feature.
 */

include_once 'ding_staff.features.inc';

/**
 * Implements hook_ctools_plugin_directory().
 *
 * It simply tells panels where to find the .inc files that define various
 * args, contexts, content_types. In this case the subdirectories of
 * ctools_plugin_example/panels are used.
 */
function ding_staff_ctools_plugin_directory($module, $plugin) {
  if ($module == 'ctools' && !empty($plugin)) {
    return "plugins/$plugin";
  }
}

/**
 * Implements hook_ding_library_menu_links().
 */
function ding_staff_ding_library_menu_links() {
  return array(
    'staff' => array(
      'linktype' => 'general_view_linktype',
      'title' => t('Staff'),
      'weight' => 15,
    ),
  );
}

/**
* Implements hook_secure_permissions_roles
*
* Ensures that ding_staff has support for secure_permissions module
*/
function ding_staff_secure_permissions_roles() {
  return array(
    'staff',
  );
}

/**
* Implements hook__secure_permissions.
*
* Ensures that ding_staff has support for secure_permissions module
*/
function ding_staff_secure_permissions($role) {
  $permissions = array(
    'anonymous user' => array(
      'view any ding_staff_profile profile',
    ),
    'authenticated user' => array(
      'view any ding_staff_profile profile',
    ),
    'editor' => array(
      'assign provider role',
      'assign guest blogger role',
      'assign local editor role',
      'assign staff role',
      'edit any ding_staff_profile profile',
      'edit own ding_staff_profile profile',
    ),
  );
  if (isset($permissions[$role])) {
    return $permissions[$role];
  }
}