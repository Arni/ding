/*
 * Creates the topbar toggle menu and fixed header.
 *
 */(function(e){function t(t){var n=e(".js-topbar-user"),r=e(".js-topbar-search"),i=e(".js-topbar-menu"),s=e(".header-wrapper");switch(t){case"search":r.toggleClass("js-topbar-toggled");i.removeClass("js-topbar-toggled");n.removeClass("js-topbar-toggled");s.show();break;case"user":n.toggleClass("js-topbar-toggled");r.removeClass("js-topbar-toggled");i.removeClass("js-topbar-toggled");s.show();break;case"menu":i.toggleClass("js-topbar-toggled");r.removeClass("js-topbar-toggled");n.removeClass("js-topbar-toggled");s.hide()}}e(document).ready(function(){var n=e(".js-topbar-link"),r=e(".header-wrapper");n.on("click touchstart",function(i){var s=e(this);if(s.hasClass("topbar-link-user")){t("user");e(".js-topbar-user #edit-name").focus()}if(s.hasClass("topbar-link-search")){t("search");e(".js-topbar-search #edit-search-block-form--2").focus()}if(s.hasClass("topbar-link-menu")){t("menu");s.focus()}if(s.hasClass("active")){s.removeClass("active");r.hide();s.focus();n.one("touchend",function(){s.css("background-color","inherit")});e("body").removeClass("js-fixed-body")}else{s.css("background-color","");n.removeClass("active");s.addClass("active");e("body").addClass("js-fixed-body")}i.preventDefault()});n.removeClass("active");r.hide();var i=e(".site-header"),s=i.offset(),o=parseInt(e("body").css("paddingTop"),10);o&&(s.top=s.top-o);var u=s.top+5,a=!1;e(window).scroll(function(){var t=e(window).scrollTop();if(t>u&&!a){i.addClass("js-fixed");a=!0}else if(t<u&&a){i.removeClass("js-fixed");a=!1}})})})(jQuery);