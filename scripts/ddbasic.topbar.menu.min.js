/*
 * Creates the topbar toggle menu and fixed header.
 *
 */(function(e){function t(){return"ontouchstart"in window||"onmsgesturechange"in window}function n(t){var n=e(".js-topbar-user"),r=e(".js-topbar-search"),i=e(".js-topbar-menu"),s=e(".header-wrapper");switch(t){case"search":r.toggleClass("js-topbar-toggled");i.removeClass("js-topbar-toggled");n.removeClass("js-topbar-toggled");s.show();break;case"user":n.toggleClass("js-topbar-toggled");r.removeClass("js-topbar-toggled");i.removeClass("js-topbar-toggled");s.show();break;case"menu":i.toggleClass("js-topbar-toggled");r.removeClass("js-topbar-toggled");n.removeClass("js-topbar-toggled");s.hide()}}e(document).ready(function(){var r=e(".js-topbar-link"),i=e(".header-wrapper");r.on("click touchstart",function(t){var s=e(this);if(s.hasClass("topbar-link-user")){n("user");e(".js-topbar-user #edit-name").focus()}if(s.hasClass("topbar-link-search")){n("search");e(".js-topbar-search #edit-search-block-form--2").focus()}if(s.hasClass("topbar-link-menu")){n("menu");s.focus()}if(s.hasClass("active")){s.removeClass("active");i.hide();s.focus();r.one("touchend",function(){s.css("background-color","inherit")});e("body").removeClass("js-fixed")}else{s.css("background-color","");r.removeClass("active");s.addClass("active");e("body").addClass("js-fixed")}t.preventDefault()});r.removeClass("active");i.hide();var s=e(".site-header"),o=s.offset(),u=parseInt(e("body").css("paddingTop"),10);u&&(o.top=o.top-u);var a=o.top+5,f=!1;e(window).scroll(function(){var n=e(window).scrollTop();if(n>a&&!f){s.addClass("js-fixed");f=!0;t()||e(".content-wrapper").css("margin-top",s.height()+20)}else if(n<a&&f){s.removeClass("js-fixed");f=!1;t()||e(".content-wrapper").css("margin-top",20)}})})})(jQuery);