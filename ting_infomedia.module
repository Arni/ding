<?php

/**
 * @file
 * Handles articles from Infomedia.
 */

// Load Field module hooks.
module_load_include('inc', 'ting_infomedia', 'ting_infomedia.field');

/**
 * Implements hook_theme().
 */
function ting_infomedia_theme($existing, $type, $theme, $path) {
  print_r($theme);
  return array(
    'ting_infomedia' => array(
      'template' => 'ting_infomedia',
      'render element' => 'elements',
      'file' => 'ting_infomedia.theme.inc',
    ),
    'ting_infomedia_hest' => 
    array('render element'=>'element',),				   
  );
}

/**
 * Inline relation types and their titles.
 */
function ting_infomedia_inline() {
  static $types;
  if (!$types) {
    $types = array(
      'hasAuthorDescription' => t('Author portrait'),
      'hasSubjectDescription' => t('Subject description'),
      'isPartOfManifestation' => t('Is part of manifestation'),
    );
  }
  return $types;
}

/**
 * hook_menu() must be implemented to emit items to place in the main menu.
 * This is a required step for modules wishing to display their own pages,
 * because the process of creating the links also tells Drupal what
 * callback function to use for a given URL. The menu items returned
 * here provide this information to the menu system.
 */

/**
 * Implements hook_menu()
 */
function ting_infomedia_menu() {
  // url path
  // http://[drupa]/?ting/infomedia
  $items['ting/infomedia'] = 
    array('title' => 'Infomedia',
	  // page callback function
	  'page callback' => 'ting_infomedia_article_view',
	  'file' => 'ting_infomedia.pages.inc',
	  // permissions
	  'access callback' => TRUE,
	  // default - do not show in menus
	  'type' => MENU_CALLBACK,);
  return $items;	  
}

/**
 * Implements hook_form_FORM_ID_alter()
 * Adding infomedia url form field to ting configuration form
 */
function ting_infomedia_form_ting_admin_ting_settings_alter(&$form, &$form_state) {
   $form['ting']['ting_infomedia_url'] = array(
    '#type' => 'textfield',
    '#title' => t('Infomedia web service URL'),
    '#description' => t('URL to the infomedia webservice (access to infomedia article base) , e.g. http://didicas.dbc.dk/useraccessinfomedia_1.1/'),
    '#required' => TRUE,
    '#default_value' => variable_get('ting_infomedia_url', ''),
    );
}

